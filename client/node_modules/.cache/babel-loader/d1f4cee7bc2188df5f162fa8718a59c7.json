{"ast":null,"code":"import _slicedToArray from \"/Users/Dillon/Documents/BOOTCAMP_2019/Repository/project3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/Dillon/Documents/BOOTCAMP_2019/Repository/project3/client/src/components/Beat/Error/Error.jsx\";\nimport React, { useEffect } from \"react\";\nimport Beat from '../../../utils/Stores/Beat';\nimport User from '../../../utils/Stores/User';\nimport Error from '../../Error';\nimport { useHistory } from \"react-router-dom\";\nvar CLEAR_CANDLES_ERROR = Beat.actions.CLEAR_CANDLES_ERROR;\nvar USER_ERROR = User.actions.USER_ERROR;\nexport default function () {\n  var _Beat$useContext = Beat.useContext(),\n      _Beat$useContext2 = _slicedToArray(_Beat$useContext, 2),\n      error = _Beat$useContext2[0].error,\n      beatDispatch = _Beat$useContext2[1];\n\n  var _User$useContext = User.useContext(),\n      _User$useContext2 = _slicedToArray(_User$useContext, 2),\n\n  /* user not needed */\n  userDispatch = _User$useContext2[1];\n\n  var history = useHistory();\n  var message = null;\n\n  if (error) {\n    if (error.response && error.response.data && error.response.data.errors && error.response.data.errors[0] && error.response.data.errors[0].message) {\n      message = error.response.data.errors[0].message;\n    } else if (error.request && error.request.status === 403) {\n      setTimeout(function () {\n        return userDispatch({\n          type: USER_ERROR,\n          message: {\n            response: {\n              data: \"You have been logged off, please sign in again.\"\n            }\n          }\n        });\n      }, 10);\n      history.push(\"/login\");\n    } else {\n      message = error.message || error.response && error.response.data;\n    }\n  }\n\n  var messageTimeout;\n  useEffect(function () {\n    if (!message) {\n      return;\n    }\n\n    clearTimeout(messageTimeout);\n    messageTimeout = setTimeout(function () {\n      candleDispatch({\n        type: CLEAR_CANDLES_ERROR\n      });\n    }, 5500);\n  }, [message]);\n  return React.createElement(Error, {\n    message: message,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  });\n}","map":{"version":3,"sources":["/Users/Dillon/Documents/BOOTCAMP_2019/Repository/project3/client/src/components/Beat/Error/Error.jsx"],"names":["React","useEffect","Beat","User","Error","useHistory","CLEAR_CANDLES_ERROR","actions","USER_ERROR","useContext","error","beatDispatch","userDispatch","history","message","response","data","errors","request","status","setTimeout","type","push","messageTimeout","clearTimeout","candleDispatch"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,IAAP,MAAiB,4BAAjB;AACA,OAAOC,IAAP,MAAiB,4BAAjB;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,SAASC,UAAT,QAA2B,kBAA3B;IAEQC,mB,GAAwBJ,IAAI,CAACK,O,CAA7BD,mB;IACAE,U,GAAeL,IAAI,CAACI,O,CAApBC,U;AAER,eAAe,YAAY;AAAA,yBACWN,IAAI,CAACO,UAAL,EADX;AAAA;AAAA,MACdC,KADc,wBACdA,KADc;AAAA,MACLC,YADK;;AAAA,yBAEuBR,IAAI,CAACM,UAAL,EAFvB;AAAA;;AAEhB;AAAuBG,EAAAA,YAFP;;AAGvB,MAAMC,OAAO,GAAGR,UAAU,EAA1B;AACA,MAAIS,OAAO,GAAG,IAAd;;AACA,MAAIJ,KAAJ,EAAW;AACP,QAAIA,KAAK,CAACK,QAAN,IACGL,KAAK,CAACK,QAAN,CAAeC,IADlB,IAEGN,KAAK,CAACK,QAAN,CAAeC,IAAf,CAAoBC,MAFvB,IAGGP,KAAK,CAACK,QAAN,CAAeC,IAAf,CAAoBC,MAApB,CAA2B,CAA3B,CAHH,IAIGP,KAAK,CAACK,QAAN,CAAeC,IAAf,CAAoBC,MAApB,CAA2B,CAA3B,EAA8BH,OAJrC,EAI8C;AAC1CA,MAAAA,OAAO,GAAGJ,KAAK,CAACK,QAAN,CAAeC,IAAf,CAAoBC,MAApB,CAA2B,CAA3B,EAA8BH,OAAxC;AACH,KAND,MAOK,IAAIJ,KAAK,CAACQ,OAAN,IAAiBR,KAAK,CAACQ,OAAN,CAAcC,MAAd,KAAyB,GAA9C,EAAmD;AACpDC,MAAAA,UAAU,CAAC;AAAA,eAAMR,YAAY,CAAC;AAC1BS,UAAAA,IAAI,EAAEb,UADoB;AAE1BM,UAAAA,OAAO,EAAE;AACLC,YAAAA,QAAQ,EAAE;AACNC,cAAAA,IAAI,EAAE;AADA;AADL;AAFiB,SAAD,CAAlB;AAAA,OAAD,EAON,EAPM,CAAV;AAQAH,MAAAA,OAAO,CAACS,IAAR,CAAa,QAAb;AACH,KAVI,MAUE;AACHR,MAAAA,OAAO,GAAGJ,KAAK,CAACI,OAAN,IAAkBJ,KAAK,CAACK,QAAN,IAAkBL,KAAK,CAACK,QAAN,CAAeC,IAA7D;AACH;AACJ;;AACD,MAAIO,cAAJ;AACAtB,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAI,CAACa,OAAL,EAAc;AACV;AACH;;AACDU,IAAAA,YAAY,CAACD,cAAD,CAAZ;AACAA,IAAAA,cAAc,GAAGH,UAAU,CAAC,YAAM;AAC9BK,MAAAA,cAAc,CAAC;AAAEJ,QAAAA,IAAI,EAAEf;AAAR,OAAD,CAAd;AACH,KAF0B,EAExB,IAFwB,CAA3B;AAGH,GARQ,EAQN,CAACQ,OAAD,CARM,CAAT;AASA,SACI,oBAAC,KAAD;AAAO,IAAA,OAAO,EAAEA,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ;AAGH","sourcesContent":["import React, { useEffect } from \"react\";\nimport Beat from '../../../utils/Stores/Beat';\nimport User from '../../../utils/Stores/User';\nimport Error from '../../Error';\nimport { useHistory } from \"react-router-dom\";\n\nconst { CLEAR_CANDLES_ERROR } = Beat.actions;\nconst { USER_ERROR } = User.actions;\n\nexport default function () {\n    const [{ error }, beatDispatch] = Beat.useContext();\n    const [/* user not needed */, userDispatch] = User.useContext();\n    const history = useHistory();\n    let message = null;\n    if (error) {\n        if (error.response\n            && error.response.data\n            && error.response.data.errors\n            && error.response.data.errors[0]\n            && error.response.data.errors[0].message) {\n            message = error.response.data.errors[0].message;\n        }\n        else if (error.request && error.request.status === 403) {\n            setTimeout(() => userDispatch({\n                type: USER_ERROR,\n                message: {\n                    response: {\n                        data: \"You have been logged off, please sign in again.\"\n                    }\n                }\n            }), 10)\n            history.push(\"/login\");\n        } else {\n            message = error.message || (error.response && error.response.data);\n        }\n    }\n    let messageTimeout;\n    useEffect(() => {\n        if (!message) {\n            return;\n        }\n        clearTimeout(messageTimeout);\n        messageTimeout = setTimeout(() => {\n            candleDispatch({ type: CLEAR_CANDLES_ERROR })\n        }, 5500)\n    }, [message])\n    return (\n        <Error message={message} />\n    )\n}"]},"metadata":{},"sourceType":"module"}