{"ast":null,"code":"import _regeneratorRuntime from \"/Users/Dillon/Documents/BOOTCAMP_2019/Repository/project3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/Dillon/Documents/BOOTCAMP_2019/Repository/project3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"/Users/Dillon/Documents/BOOTCAMP_2019/Repository/project3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/Dillon/Documents/BOOTCAMP_2019/Repository/project3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/Dillon/Documents/BOOTCAMP_2019/Repository/project3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/Dillon/Documents/BOOTCAMP_2019/Repository/project3/client/src/components/DrumCall/DrumCall.js\";\nimport React, { useState, useRef } from \"react\";\nimport DrumMachine from \"../Drum/Drum\";\nimport \"./style.css\";\nimport API from \"../../utils/Stores/Beat/BeatsAPI\";\nexport function DrumCall(props) {\n  var _this = this;\n\n  var data = [{\n    id: \"Conga Drum\",\n    letter: \"Q\",\n    src: \"http://s1download-universal-soundbank.com/wav/13882.wav\",\n    audioRef: useRef()\n  }, {\n    id: \"Drum Rimshot\",\n    letter: \"W\",\n    src: \"http://cd.textfiles.com/cdaction/cdaction47b/BEAT2000/SOUNDS/SFX/RIMSHOT1.WAV\",\n    audioRef: useRef()\n  }, {\n    id: \"Bass Drum\",\n    letter: \"E\",\n    src: \"http://www.denhaku.com/r_box/sr16/sr16bd/brt hall.wav\",\n    audioRef: useRef()\n  }, {\n    id: \"High Hat\",\n    letter: \"A\",\n    src: \"http://dight310.byu.edu/media/audio/FreeLoops.com/5/5/Long%20Open%20Hi%20Hat%20002-1653-Free-Loops.com.mp3\",\n    audioRef: useRef()\n  }, {\n    id: \"Snare\",\n    letter: \"S\",\n    src: \"http://cd.textfiles.com/10000soundssongs/WAV/RVBSNARR.WAV\",\n    audioRef: useRef()\n  }, {\n    id: \"Synth\",\n    letter: \"D\",\n    src: \"http://dight310.byu.edu/media/audio/FreeLoops.com/3/3/Drop%20Off%20Bass%20Dist-87-Free-Loops.com.mp3\",\n    audioRef: useRef()\n  }, {\n    id: \"Airhorn\",\n    letter: \"Z\",\n    src: \"http://www.able2products.com/sounds/horn.mp3\",\n    audioRef: useRef()\n  }, {\n    id: \"Drum Solo\",\n    letter: \"X\",\n    src: \"http://www.maggiereid.com/flash/files/sound/Wave%20Files/RIMSHOT.WAV\",\n    audioRef: useRef()\n  }, {\n    id: \"Latin Drums\",\n    letter: \"C\",\n    src: \"http://dight310.byu.edu/media/audio/FreeLoops.com/5/5/Latin%20Percussions-5244-Free-Loops.com.mp3\",\n    audioRef: useRef()\n  }]; // hooks:\n  // constructor(props) {\n  //     super(props)\n  //     this.scheduledEvents = [];\n  // this.drum = {\n  //     display: '',\n  //     recording: {\n  //         mode: 'RECORDING',\n  //         events: [],\n  //         currentTime: 0,\n  //         currentEvents: [],\n  //     },\n  //     lettersPressed: []\n  // }\n  // }\n\n  var scheduledEvents = [];\n\n  var _useState = useState({\n    display: '',\n    recording: {\n      mode: 'RECORDING',\n      events: [],\n      currentTime: 0,\n      currentEvents: []\n    }\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      drum = _useState2[0],\n      setDrumState = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      lettersPressed = _useState4[0],\n      setLettersPressed = _useState4[1];\n\n  var _useState5 = useState({\n    beat: \"\",\n    length: []\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      beat = _useState6[0],\n      setBeats = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      name = _useState8[0],\n      setName = _useState8[1];\n\n  var _useState9 = useState(),\n      _useState10 = _slicedToArray(_useState9, 2),\n      length = _useState10[0],\n      setLength = _useState10[1];\n\n  var _playSound = function playSound(keyInfo) {\n    keyInfo.audioRef.current.play();\n    keyInfo.audioRef.current.currentTime = 0;\n    handleDisplay(keyInfo.id);\n  };\n\n  var setRecording = function setRecording(value) {\n    setDrumState(_objectSpread({}, drum, {\n      recording: Object.assign({}, drum.recording, value)\n    }));\n  };\n\n  var addLetter = function addLetter(letter) {\n    console.log(\"previous drum: \", lettersPressed);\n    var newLettersPressed = [].concat(_toConsumableArray(lettersPressed), [letter]);\n    console.log(\"new drum: \", newLettersPressed);\n    setLettersPressed(newLettersPressed);\n  };\n\n  var getRecordingTime = function getRecordingTime() {\n    if (drum.recording.events.length === 0) {\n      return 0;\n    }\n\n    return Math.max.apply(Math, _toConsumableArray(drum.recording.events.map(function (event) {\n      return event.time + event.duration;\n    })));\n  };\n\n  var onClickPlay = function onClickPlay() {\n    setRecording({\n      mode: 'PLAYING'\n    });\n    lettersPressed.forEach(function (keyInfo, index) {\n      scheduledEvents.push(setTimeout(function () {\n        keyInfo.playSound();\n      }, index * 300));\n    });\n  };\n\n  var onClickStop = function onClickStop() {\n    scheduledEvents.forEach(function (scheduledEvent) {\n      clearTimeout(scheduledEvent);\n    });\n\n    _this.setRecording({\n      mode: 'RECORDING',\n      currentEvents: []\n    });\n  };\n\n  var clearBtn = function clearBtn() {};\n\n  var saveBtn = function saveBtn() {\n    createBeats();\n  }; // useEffect(() => {\n  //     createBeats();\n  // })\n\n\n  function createBeats() {\n    return _createBeats.apply(this, arguments);\n  }\n\n  function _createBeats() {\n    _createBeats = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var beat;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return API.createBeats();\n\n            case 2:\n              beat = _context.sent;\n              setBeats(beat);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _createBeats.apply(this, arguments);\n  }\n\n  var handleDisplay = function handleDisplay(display) {\n    return setDrumState(_objectSpread({}, drum, {\n      display: display\n    }));\n  };\n\n  return React.createElement(\"div\", {\n    id: \"drum-machine\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: \"drum-roll\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, data.map(function (d) {\n    return React.createElement(DrumMachine, {\n      addLetter: addLetter,\n      recording: drum.recording,\n      setRecording: setRecording,\n      audioRef: d.audioRef,\n      playSound: function playSound() {\n        return _playSound(d);\n      },\n      key: d.id,\n      id: d.id,\n      letter: d.letter,\n      src: d.src,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    });\n  })), React.createElement(\"div\", {\n    id: \"display\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, drum.display), React.createElement(\"form\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    id: \"beatTitle\",\n    placeholder: \"Ice Cold Beat Name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    id: \"beatSeq\",\n    placeholder: \"Ice Cold Beat Sequence\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-info\",\n    onClick: saveBtn,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, \"Save\"), React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-danger\",\n    onClick: clearBtn,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, \"Clear\"), React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-success\",\n    onClick: onClickPlay,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, \"Play\")));\n}\nexport default DrumCall;","map":{"version":3,"sources":["/Users/Dillon/Documents/BOOTCAMP_2019/Repository/project3/client/src/components/DrumCall/DrumCall.js"],"names":["React","useState","useRef","DrumMachine","API","DrumCall","props","data","id","letter","src","audioRef","scheduledEvents","display","recording","mode","events","currentTime","currentEvents","drum","setDrumState","lettersPressed","setLettersPressed","beat","length","setBeats","name","setName","setLength","playSound","keyInfo","current","play","handleDisplay","setRecording","value","Object","assign","addLetter","console","log","newLettersPressed","getRecordingTime","Math","max","map","event","time","duration","onClickPlay","forEach","index","push","setTimeout","onClickStop","scheduledEvent","clearTimeout","clearBtn","saveBtn","createBeats","d"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from \"react\";\nimport DrumMachine from \"../Drum/Drum\";\nimport \"./style.css\";\nimport API from \"../../utils/Stores/Beat/BeatsAPI\";\n\n\n\n\n\nexport function DrumCall(props) {\n    const data = [\n        { id: \"Conga Drum\", letter: \"Q\", src: \"http://s1download-universal-soundbank.com/wav/13882.wav\", audioRef: useRef() },\n        { id: \"Drum Rimshot\", letter: \"W\", src: \"http://cd.textfiles.com/cdaction/cdaction47b/BEAT2000/SOUNDS/SFX/RIMSHOT1.WAV\", audioRef: useRef() },\n        { id: \"Bass Drum\", letter: \"E\", src: \"http://www.denhaku.com/r_box/sr16/sr16bd/brt hall.wav\", audioRef: useRef() },\n        { id: \"High Hat\", letter: \"A\", src: \"http://dight310.byu.edu/media/audio/FreeLoops.com/5/5/Long%20Open%20Hi%20Hat%20002-1653-Free-Loops.com.mp3\", audioRef: useRef() },\n        { id: \"Snare\", letter: \"S\", src: \"http://cd.textfiles.com/10000soundssongs/WAV/RVBSNARR.WAV\", audioRef: useRef() },\n        { id: \"Synth\", letter: \"D\", src: \"http://dight310.byu.edu/media/audio/FreeLoops.com/3/3/Drop%20Off%20Bass%20Dist-87-Free-Loops.com.mp3\", audioRef: useRef() },\n        { id: \"Airhorn\", letter: \"Z\", src: \"http://www.able2products.com/sounds/horn.mp3\", audioRef: useRef() },\n        { id: \"Drum Solo\", letter: \"X\", src: \"http://www.maggiereid.com/flash/files/sound/Wave%20Files/RIMSHOT.WAV\", audioRef: useRef() },\n        { id: \"Latin Drums\", letter: \"C\", src: \"http://dight310.byu.edu/media/audio/FreeLoops.com/5/5/Latin%20Percussions-5244-Free-Loops.com.mp3\", audioRef: useRef() },\n    ]\n    // hooks:\n    // constructor(props) {\n    //     super(props)\n    //     this.scheduledEvents = [];\n        // this.drum = {\n        //     display: '',\n        //     recording: {\n        //         mode: 'RECORDING',\n        //         events: [],\n        //         currentTime: 0,\n        //         currentEvents: [],\n        //     },\n        //     lettersPressed: []\n        // }\n    // }\n\n    let scheduledEvents = [];\n    const [drum, setDrumState] = useState({\n        display: '',\n        recording: {\n            mode: 'RECORDING',\n            events: [],\n            currentTime: 0,\n            currentEvents: [],\n        }\n    });\n    const [lettersPressed, setLettersPressed] = useState([]);\n    const [beat, setBeats] = useState({\n        beat: \"\",\n        length: []\n    });\n\n    const [name, setName] = useState();\n    const [length, setLength] = useState();\n\n    const playSound = keyInfo => {\n        keyInfo.audioRef.current.play()\n        keyInfo.audioRef.current.currentTime = 0\n        handleDisplay(keyInfo.id)\n    }\n\n\n    const setRecording = value => {\n        setDrumState({\n            ...drum,\n            recording: Object.assign({}, drum.recording, value),\n        });\n    };\n\n    const addLetter = letter => {\n        console.log(\"previous drum: \", lettersPressed);\n        const newLettersPressed = [...lettersPressed, letter];\n        console.log(\"new drum: \", newLettersPressed);\n        setLettersPressed(newLettersPressed);\n    }\n\n    const getRecordingTime = () => {\n        if (drum.recording.events.length === 0) {\n            return 0;\n        }\n        return Math.max(\n            ...drum.recording.events.map(event => event.time + event.duration)\n        );\n    };\n\n    const onClickPlay = () => {\n        setRecording({\n            mode: 'PLAYING',\n        });\n        lettersPressed.forEach((keyInfo, index) => {\n            scheduledEvents.push(\n                setTimeout(() => {\n                    keyInfo.playSound();\n                }, index * 300),\n            );\n        });\n    };\n\n    const onClickStop = () => {\n        scheduledEvents.forEach(scheduledEvent => {\n            clearTimeout(scheduledEvent);\n        });\n        this.setRecording({\n            mode: 'RECORDING',\n            currentEvents: [],\n        });\n    };\n\n\n    const clearBtn = () => {\n        \n    }\n\n    const saveBtn = () => {\n        createBeats();\n    }\n\n    // useEffect(() => {\n    //     createBeats();\n    // })\n\n    async function createBeats() {\n        const beat = await API.createBeats();\n        setBeats(beat);\n    }\n\n    const handleDisplay = display => setDrumState({ ...drum, display });\n\n    return (\n        <div id=\"drum-machine\">\n            <div id=\"drum-roll\">\n                {data.map(d => (\n                    <DrumMachine\n                        addLetter={addLetter}\n                        recording={drum.recording}\n                        setRecording={setRecording}\n                        audioRef={d.audioRef}\n                        playSound={() => playSound(d)}\n                        key={d.id}\n                        id={d.id}\n                        letter={d.letter}\n                        src={d.src}\n                    />\n                ))}\n            </div>\n            <div id=\"display\">{drum.display}</div>\n            <form>\n                <div className=\"form-group\">\n                    {/* <label for=\"beatTitle\">Title</label> */}\n                    <input type=\"text\" className=\"form-control\" id=\"beatTitle\" placeholder=\"Ice Cold Beat Name\" />\n                </div>\n                <div className=\"form-group\">\n                    {/* <label for=\"beatSeq\">Beat Sequence</label> */}\n                    <input type=\"text\" className=\"form-control\" id=\"beatSeq\" placeholder=\"Ice Cold Beat Sequence\" />\n                </div>\n                <button type=\"button\" className=\"btn btn-info\" onClick={saveBtn}>Save</button>\n                <button type=\"button\" className=\"btn btn-danger\" onClick={clearBtn}>Clear</button>\n                <button type=\"button\" className=\"btn btn-success\" onClick={onClickPlay}>Play</button>\n            </form>\n        </div>\n    )\n}\n\nexport default DrumCall;\n\n"]},"metadata":{},"sourceType":"module"}